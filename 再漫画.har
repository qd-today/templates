[
    {
        "comment": "登入",
        "request": {
            "method": "POST",
            "url": "https://i.zaimanhua.com/lpi/v1/login/passwd?username={{ username |urlencode}}&passwd={{ md5(password) |urlencode}}",
            "headers": [],
            "cookies": []
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "\"errno\":0",
                    "from": "content"
                },
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [
                {
                    "re": "\"errno\":(1|2|3)",
                    "from": "content"
                }
            ],
            "extract_variables": [
                {
                    "name": "token",
                    "re": "\"token\":\"([^\"]+)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "签到",
        "request": {
            "method": "POST",
            "url": "https://i.zaimanhua.com/lpi/v1/task/sign_in",
            "headers": [
                {
                    "name": "Authorization",
                    "value": "Bearer {{ token }}"
                }
            ],
            "cookies": []
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "\"errno\":(0|1)",
                    "from": "content"
                },
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [
                {
                    "re": "\"errno\":99",
                    "from": "content"
                }
            ],
            "extract_variables": [
                {
                    "name": "errmsg",
                    "re": "\"errmsg\":\"([^\"]+)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "用户名,等级获取",
        "request": {
            "method": "POST",
            "url": "https://i.zaimanhua.com/lpi/v1/u_center/passport/message",
            "headers": [
                {
                    "name": "Authorization",
                    "value": "Bearer {{ token }}"
                }
            ],
            "cookies": []
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "\"errno\":0",
                    "from": "content"
                },
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [
                {
                    "re": "\"errno\":99",
                    "from": "content"
                }
            ],
            "extract_variables": [
                {
                    "name": "nickname",
                    "re": "\"nickname\":\"([^\"]+)\"",
                    "from": "content"
                },
                {
                    "name": "user_level",
                    "re": "\"user_level\":(\\d+)}}",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "积分,签到天数获取",
        "request": {
            "method": "GET",
            "url": "https://i.zaimanhua.com/lpi/v1/task/list",
            "headers": [
                {
                    "name": "Authorization",
                    "value": "Bearer {{ token }}"
                }
            ],
            "cookies": []
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "\"errno\":0",
                    "from": "content"
                },
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [
                {
                    "re": "\"errno\":99",
                    "from": "content"
                }
            ],
            "extract_variables": [
                {
                    "name": "jifen",
                    "re": "\"userCurrency\"[^}]*\"credits\":(\\d+)",
                    "from": "content"
                },
                {
                    "name": "leiji",
                    "re": "\"sumSignTask\"[^}]*\"continuousSignDays\":(\\d+)",
                    "from": "content"
                },
                {
                    "name": "lishi",
                    "re": "\"sumSignDays\":(\\d+)",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "Unicode转换",
        "request": {
            "method": "POST",
            "url": "api://util/unicode",
            "headers": [],
            "cookies": [],
            "data": "html_unescape=false&content=签到状态:{{errmsg}}\\r\\n用户名: {{nickname}} 等级: LV{{user_level}} 积分:{{jifen}}\\r\\n累计连续签到{{leiji}}天/历史签到记录{{lishi}}天"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                },
                {
                    "re": "\"状态\": \"200\"",
                    "from": "content"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "__log__",
                    "re": "\"转换后\": \"(.*)\"",
                    "from": "content"
                }
            ]
        }
    }
]