[ { "request": { "method": "GET", "url": "https://pthome.net/attendance.php", "headers": [ { "name": ":authority", "value": "pthome.net" }, { "name": ":method", "value": "GET" }, { "name": ":path", "value": "/attendance.php" }, { "name": ":scheme", "value": "https" }, { "name": "accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7" }, { "name": "accept-encoding", "value": "gzip, deflate, br" }, { "name": "accept-language", "value": "zh-CN,zh;q=0.9" }, { "name": "cache-control", "value": "no-cache" }, { "name": "cookie", "value": "{{cookie}}" }, { "name": "dnt", "value": "1" }, { "name": "pragma", "value": "no-cache" }, { "name": "referer", "value": "https://pthome.net/userdetails.php" }, { "name": "sec-ch-ua", "value": "\"Google Chrome\";v=\"111\", \"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"111\"" }, { "name": "sec-ch-ua-mobile", "value": "?0" }, { "name": "sec-ch-ua-platform", "value": "\"macOS\"" }, { "name": "sec-fetch-dest", "value": "document" }, { "name": "sec-fetch-mode", "value": "navigate" }, { "name": "sec-fetch-site", "value": "same-origin" }, { "name": "sec-fetch-user", "value": "?1" }, { "name": "upgrade-insecure-requests", "value": "1" }, { "name": "user-agent", "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36" } ], "cookies": [] }, "rule": { "success_asserts": [ { "re": "200", "from": "status" } ], "failed_asserts": [ { "re": "关闭维护", "from": "content" } ], "extract_variables": [ { "name": "recheck_cnt", "re": "第[\\s\\S]+今日签到排名：<b>\\d+</b> / <b>\\d+</b>", "from": "content" }, { "name": "traffic", "re": "分享率[\\s\\S]+H&", "from": "content" }, { "name": "magic", "re": "魔力值[\\s\\S]+签到已得\\d+\\)", "from": "content" } ] } }, { "comment": "字符串替换", "request": { "method": "POST", "url": "api://util/string/replace", "headers": [], "cookies": [], "data": "r=text&p=H&t=&s={{regex_replace(magic | striptags, \"\\s?\\[使用\\]\", \"\")}} {{traffic | striptags}} {{regex_replace(recheck_cnt | striptags, \"点击[\\s\\S]+目前\", \"\")}}" }, "rule": { "success_asserts": [ { "re": "200", "from": "status" }, { "re": "\"状态\": \"OK\"", "from": "content" } ], "failed_asserts": [], "extract_variables": [ { "name": "__log__", "re": ".*", "from": "content" } ] } } ]